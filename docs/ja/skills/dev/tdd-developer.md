---
layout: default
title: TDD Developer
grand_parent: 日本語
parent: ソフトウェア開発
nav_order: 2
lang_peer: /en/skills/dev/tdd-developer/
permalink: /ja/skills/dev/tdd-developer/
---

# TDD Developer
{: .no_toc }

Red-Green-Refactor サイクルによるテスト駆動開発ガイド。
{: .fs-6 .fw-300 }

<span class="badge badge-free">API不要</span> <span class="badge badge-workflow">ワークフロー</span>

<details open markdown="block">
  <summary>目次</summary>
  {: .text-delta }
- TOC
{:toc}
</details>

---

## 概要

TDD Developer は、規律あるテスト駆動開発をガイドするスキルです。コードを先に書いてからテストを追加するのではなく、**Red-Green-Refactor** サイクルに従います。まず失敗するテストを書き、テストを通す最小限のコードを実装し、テストをグリーンに保ったままリファクタリングします。これにより、よりクリーンな設計、高いコード品質、少ない欠陥が実現されます。

pytest, Jest, Vitest, JUnit 5, RSpec, Go testing, xUnit など、複数の言語・テストフレームワークに対応しています。

## 使用場面

- **新機能をTDDで**ゼロから開発したい場合
- **レガシーコードをリファクタリング**するために、まずテストカバレッジが必要な場合
- 正確性が重要な**複雑なビジネスロジック**を実装する場合
- ガイド付きの例で**TDD手法を学びたい**場合
- テストファーストの開発を明示的に要求する場合

## 前提条件

- Claude Code がインストール済みであること
- `tdd-developer` スキルが `~/.claude/skills/` にコピー済みであること
- 言語に対応するテストフレームワークがインストール済みであること(Python なら `pytest`、JS/TS なら `jest` など)

外部 API キーやサービスは不要です。

## 動作の仕組み

### Red-Green-Refactor サイクル

各機能は短いサイクルの繰り返しで構築されます:

1. **RED** -- 小さく焦点を絞ったテストを書き、失敗を確認。構文エラーではなく正しい理由で失敗することを確認。
2. **GREEN** -- テストを通す最小限のコードを実装。この段階ではハードコードされた値でも可。
3. **REFACTOR** -- コードを改善(重複排除、命名改善、ロジック簡素化)し、全テストがグリーンのままであることを確認。
4. **COMMIT**(任意) -- 各サイクル成功後にコミットし、クリーンな履歴を維持。

```
  RED           GREEN         REFACTOR
 失敗する       テストを       コードを
 テストを  -->  通す最小  -->  改善、
 書く           コード         テスト維持
      \__________________________/
               繰り返し
```

### 全体ワークフロー

1. **要件の理解** -- 機能を小さくテスト可能な振る舞いに分解し、エッジケースを特定。
2. **テストケースの計画** -- コードを書く前に、テストケースの優先順位付きリストを作成。
3. **サイクルの実行** -- 各テストケースに対して Red-Green-Refactor を実行。
4. **レビュー** -- すべての振る舞いが実装された後、全体の設計とアーキテクチャを確認。

## 使い方の例

### 例1: TDDで機能を構築

```
TDDを使ってメールアドレスのバリデーション関数を作成してください。
@の欠如、ドメインの欠如、空文字、null値に対応してください。
```

テストケースの計画後、各 Red-Green-Refactor サイクルを順に実行し、毎ステップでテストを実行します。

### 例2: 既存コードにテストカバレッジを追加

```
この PriceCalculator クラスにTDDスタイルのテストを追加し、
テストしやすいようにリファクタリングしてください。
```

まず既存の振る舞いに対するテストを書き、テストをグリーンに保ちながらリファクタリングを支援します。

### 例3: 特定フレームワークでのTDD

```
pytest を使ったTDDでショッピングカートモジュールを実装してください。
商品追加、数量管理、割引ロジックの順で進めてください。
```

指定されたフレームワークを使用し、テストサイクルを通じて段階的に機能を構築します。

## ヒントとベストプラクティス

- **サイクルを短く保つ** -- 1つの Red-Green-Refactor サイクルは1-2分を目安に。それ以上かかる場合は、テストをより小さな振る舞いに分割してください。
- **実装ではなく振る舞いをテストする** -- 出力と副作用に対してアサートし、内部構造はテストしない。リファクタリングに強いテストになります。
- **Arrange-Act-Assert パターンを使う** -- セットアップ、実行、検証を明確に分けてテストを構成。
- **リファクタリングを省略しない** -- Refactor ステップは設計改善が起こる場所。省略すると技術的負債が蓄積されます。
- **モックを使いすぎない** -- 過度なモックはテストを脆く、実装に密結合にします。
- **パラメータ化テストを活用** -- 異なる入力値で同様のテストケースを効率的にカバー。

### よくある落とし穴

| 落とし穴 | 問題点 |
|:---------|:-------|
| コードの後にテストを書く | TDDの設計上のメリットが失われる |
| 100%カバレッジを追求 | 意味のあるカバレッジに集中すべき |
| 実装の詳細をテストする | リファクタリング時にテストが壊れる |
| 大きなテストを書く | 失敗箇所の特定が困難 |
| Refactorステップを省略 | 技術的負債が蓄積される |

## 関連スキル

- [Critical Code Reviewer]({{ '/ja/skills/dev/critical-code-reviewer/' | relative_url }}) -- TDD実装後のコード品質レビュー
- [Data Scientist]({{ '/ja/skills/dev/data-scientist/' | relative_url }}) -- データ分析・機械学習ワークフロー
