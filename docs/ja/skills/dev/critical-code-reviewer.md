---
layout: default
title: Critical Code Reviewer
grand_parent: 日本語
parent: ソフトウェア開発
nav_order: 1
lang_peer: /en/skills/dev/critical-code-reviewer/
permalink: /ja/skills/dev/critical-code-reviewer/
---

# Critical Code Reviewer
{: .no_toc }

4人の専門家ペルソナによる並列コードレビュー。
{: .fs-6 .fw-300 }

<span class="badge badge-free">API不要</span> <span class="badge badge-workflow">ワークフロー</span>

<details open markdown="block">
  <summary>目次</summary>
  {: .text-delta }
- TOC
{:toc}
</details>

---

## 概要

Critical Code Reviewer は、ソースコードを **4人の独立した専門家ペルソナ** で並列にレビューします。各ペルソナが異なる品質観点に集中し、重大度付きの統合レビューレポートを生成します。

4つのペルソナ:

| ペルソナ | 焦点 | 主な問い |
|:---------|:-----|:---------|
| **ベテランエンジニア** (経験20年) | 設計判断、アンチパターン、長期保守性 | 「5年後も保守できるか?」 |
| **TDDエキスパート** | テスト容易性、依存関係管理、リファクタリング安全性 | 「単独でテストできるか?」 |
| **Clean Codeエキスパート** | 命名、可読性、SOLID原則 | 「一目で理解できるか?」 |
| **バグハンター** | 状態遷移、例外パス、非同期競合、依存関係の完全性 | 「本番で壊れないか?」 |

## 使用場面

- PR マージ前に**包括的なコードレビュー**を行いたい場合
- リファクタリング前に既存コードの**設計品質を評価**したい場合
- 状態管理、非同期処理、エラーハンドリングの**本番バグを事前に検出**したい場合
- 不慣れなコードベースの品質を把握したい場合
- 重大度付きの構造化されたレビューレポートが必要な場合

## 前提条件

- Claude Code がインストール済みであること
- `critical-code-reviewer` スキルが `~/.claude/skills/` にコピー済みであること
- レビュー対象のソースファイルがワーキングディレクトリからアクセス可能であること

外部 API キーやサービスは不要です。

## 動作の仕組み

レビューは3つのフェーズで進行します:

1. **準備** -- 対象ファイルの特定、プログラミング言語の検出、言語固有チェックの有効化(Python型ヒント、JS/TS非同期パターン等)。
2. **並列レビュー** -- 4つのサブエージェントが同時に実行され、各ペルソナのチェックリストをコードに適用。
3. **統合** -- 結果を重複排除し、重大度(Critical / Major / Minor / Info)を付与して統合レポートを生成。

```
Phase 1: 準備
       |
  +---------+---------+---------+
  |         |         |         |
ベテラン   TDD     Clean     バグ
エンジニア Expert  Code      ハンター
  |         |         |         |
  +---------+---------+---------+
       |
Phase 3: 統合レポート
```

### 重大度レベル

| 重大度 | 定義 | 例 |
|:-------|:-----|:---|
| **Critical** | バグ、データ損失、セキュリティ問題 | Nullチェック欠如、リソースリーク |
| **Major** | 重大な保守性・設計問題 | God class、テスト不可能な設計 |
| **Minor** | 改善推奨だが緊急ではない | 命名改善、軽微なリファクタリング |
| **Info** | ベストプラクティス提案 | 代替アプローチの提示 |

## 使い方の例

### 例1: 単一ファイルのレビュー

```
このファイルを批判的にレビューしてください: src/services/payment_processor.py
```

4つのペルソナすべてがファイルに対して実行され、重大度付きのレポートが生成されます。

### 例2: PRの差分レビュー

```
このPRの変更をクリティカルコードレビューしてください。
特に新しい認証モジュールに注目してください。
```

変更されたファイルにスコープを絞り、差分によって導入されたリスクを指摘します。

### 例3: バグの集中探索

```
src/workers/queue_handler.ts の非同期競合状態と
例外ハンドリングの問題をチェックしてください。
```

バグハンターペルソナに重点を置きつつ、他のペルソナも知見を提供します。

## ヒントとベストプラクティス

- **レビュー範囲を絞る** -- リポジトリ全体ではなく、特定のファイルやディレクトリを指定すると、より集中した結果が得られます。
- **言語を明示する** -- 自動検出されない場合は言語を伝えることで、言語固有チェック(Python, JavaScript/TypeScript)が有効になります。
- **テストと組み合わせる** -- `tdd-developer` スキルと併用し、レビューで見つかった問題に対してテストを作成できます。
- **重大度で優先順位付け** -- Critical と Major はマージ前に修正し、Minor と Info はバックログに回すのが効果的です。

## 関連スキル

- [TDD Developer]({{ '/ja/skills/dev/tdd-developer/' | relative_url }}) -- レビューで見つかった問題に対してテストを作成
- [Data Scientist]({{ '/ja/skills/dev/data-scientist/' | relative_url }}) -- データ分析・機械学習ワークフロー
