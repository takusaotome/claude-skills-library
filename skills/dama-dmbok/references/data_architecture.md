# Data Architecture（データアーキテクチャ）

## 概要

データアーキテクチャは、組織のデータニーズを定義し、データ資産管理の青写真を策定する知識領域です。ビジネス戦略とテクノロジーを結びつける役割を担います。

---

## データアーキテクチャの定義

> 組織のデータ要件を満たすための構造、モデル、ポリシー、
> ルール、標準を定義し、データの収集、保管、統合、
> 利用を管理するための青写真。

---

## アーキテクチャの構成要素

### アーキテクチャレイヤー

```
┌─────────────────────────────────────────────────────────┐
│                    ビジネスアーキテクチャ                │
│                    （業務要件、プロセス）                │
├─────────────────────────────────────────────────────────┤
│                    データアーキテクチャ                  │
│                    （データモデル、フロー）              │
├─────────────────────────────────────────────────────────┤
│                 アプリケーションアーキテクチャ           │
│                 （システム、インターフェース）           │
├─────────────────────────────────────────────────────────┤
│                    技術アーキテクチャ                    │
│                 （インフラ、ネットワーク）               │
└─────────────────────────────────────────────────────────┘
```

### データアーキテクチャの成果物

| 成果物 | 説明 | 用途 |
|--------|------|------|
| **概念データモデル** | ビジネスエンティティと関係 | ビジネス要件の可視化 |
| **論理データモデル** | 正規化されたデータ構造 | 設計の基礎 |
| **物理データモデル** | 実装レベルの設計 | 実装の指針 |
| **データフロー図** | データの流れ | 統合設計 |
| **データカタログ** | データ資産の一覧 | データ発見 |

---

## エンタープライズデータモデル

### モデルの階層

```
┌─────────────────────────────────────────────────────────┐
│                 Subject Area Model                      │
│               （サブジェクトエリアモデル）                │
│                                                         │
│   ┌──────────┐  ┌──────────┐  ┌──────────┐             │
│   │  顧客    │  │  商品    │  │  注文    │             │
│   └──────────┘  └──────────┘  └──────────┘             │
├─────────────────────────────────────────────────────────┤
│                 Conceptual Data Model                   │
│                  （概念データモデル）                    │
│                                                         │
│   ┌──────────┐      ┌──────────┐                       │
│   │  顧客    │──────│  注文    │                       │
│   └──────────┘      └────┬─────┘                       │
│                          │                              │
│                    ┌─────┴─────┐                       │
│                    │  注文明細  │                       │
│                    └─────┬─────┘                       │
│                          │                              │
│                    ┌─────┴─────┐                       │
│                    │  商品     │                       │
│                    └───────────┘                       │
├─────────────────────────────────────────────────────────┤
│                  Logical Data Model                     │
│                  （論理データモデル）                    │
│                                                         │
│   詳細な属性、キー、正規化された構造                    │
├─────────────────────────────────────────────────────────┤
│                  Physical Data Model                    │
│                  （物理データモデル）                    │
│                                                         │
│   テーブル、カラム、データ型、インデックス              │
└─────────────────────────────────────────────────────────┘
```

### サブジェクトエリア

| エリア | 説明 | 主要エンティティ |
|--------|------|-----------------|
| **Party** | 関係者 | 顧客、従業員、サプライヤー |
| **Product** | 製品・サービス | 商品、カテゴリ、価格 |
| **Order** | 取引 | 注文、契約、請求 |
| **Location** | 場所 | 住所、拠点、地域 |
| **Finance** | 財務 | 勘定、コスト、予算 |

---

## データフローアーキテクチャ

### 典型的なデータフロー

```
┌───────────────────────────────────────────────────────────────────┐
│                      データフローアーキテクチャ                    │
├───────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ソース層           統合層           保管層           消費層      │
│                                                                   │
│ ┌─────────┐      ┌─────────┐     ┌─────────┐     ┌─────────┐    │
│ │ 業務    │      │         │     │         │     │ BI/     │    │
│ │ システム │─────▶│  ETL/   │────▶│  DWH    │────▶│ レポート │    │
│ │ (ERP)   │      │  ELT    │     │         │     │         │    │
│ └─────────┘      │         │     └─────────┘     └─────────┘    │
│                  │         │           │                         │
│ ┌─────────┐      │         │     ┌─────────┐     ┌─────────┐    │
│ │ CRM     │─────▶│         │────▶│ Data    │────▶│ ML/AI   │    │
│ │         │      │         │     │ Lake    │     │         │    │
│ └─────────┘      │         │     └─────────┘     └─────────┘    │
│                  │         │           │                         │
│ ┌─────────┐      │         │     ┌─────────┐     ┌─────────┐    │
│ │ 外部    │─────▶│         │────▶│ Data    │────▶│ API     │    │
│ │ データ  │      │         │     │ Mart    │     │         │    │
│ └─────────┘      └─────────┘     └─────────┘     └─────────┘    │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

### モダンデータアーキテクチャ

```
┌───────────────────────────────────────────────────────────────────┐
│                    モダンデータアーキテクチャ                      │
├───────────────────────────────────────────────────────────────────┤
│                                                                   │
│                         データメッシュ                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│  │ 顧客ドメイン │  │ 商品ドメイン │  │ 注文ドメイン │              │
│  │ Data Product│  │ Data Product│  │ Data Product│              │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘              │
│         │                │                │                      │
│         └────────────────┼────────────────┘                      │
│                          ▼                                        │
│                  ┌─────────────────┐                             │
│                  │ Data Platform   │                             │
│                  │ (Infrastructure)│                             │
│                  └─────────────────┘                             │
│                                                                   │
│  レイクハウス                                                     │
│  ┌─────────────────────────────────────────────────┐            │
│  │  Data Lake  +  Data Warehouse  =  Lakehouse    │            │
│  │  (生データ)    (構造化データ)                   │            │
│  └─────────────────────────────────────────────────┘            │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

---

## アーキテクチャパターン

### データ統合パターン

| パターン | 説明 | 用途 |
|---------|------|------|
| **ETL** | Extract-Transform-Load | バッチ処理 |
| **ELT** | Extract-Load-Transform | クラウドDWH |
| **CDC** | Change Data Capture | リアルタイム同期 |
| **API** | 同期/非同期API | アプリ連携 |
| **Event** | イベント駆動 | リアルタイム処理 |

### ストレージパターン

| パターン | 特徴 | 用途 |
|---------|------|------|
| **RDBMS** | ACID、構造化 | 業務システム |
| **NoSQL** | スケール、柔軟性 | ビッグデータ |
| **Data Lake** | 生データ保管 | 分析・ML |
| **Data Warehouse** | 分析最適化 | BI・レポート |
| **Lakehouse** | Lake+DWHの統合 | 統合分析 |

---

## アーキテクチャ設計プロセス

### 設計ステップ

```
1. 要件収集
   ├── ビジネス要件の理解
   ├── データ要件の特定
   └── 非機能要件（性能、可用性等）

2. 現状分析
   ├── 既存システムの調査
   ├── データフローの把握
   └── 課題・ギャップの特定

3. 目標設計
   ├── データモデル設計
   ├── データフロー設計
   └── 技術スタック選定

4. ロードマップ
   ├── 段階的な移行計画
   ├── 優先順位付け
   └── リソース計画
```

### 設計原則

| 原則 | 説明 |
|------|------|
| **シンプルさ** | 必要最小限の複雑さ |
| **モジュール性** | 疎結合、交換可能 |
| **スケーラビリティ** | 成長に対応 |
| **セキュリティ** | デフォルトで安全 |
| **再利用性** | 共通コンポーネント |
| **ガバナンス** | 統制と標準化 |

---

## 技術標準

### データ標準

| 領域 | 標準例 |
|------|--------|
| **フォーマット** | JSON, Parquet, Avro |
| **命名規則** | snake_case, 命名標準 |
| **文字コード** | UTF-8 |
| **日付形式** | ISO 8601 |
| **API** | REST, GraphQL |

### テクノロジースタック

```
┌─────────────────────────────────────────────────────────┐
│                    テクノロジースタック                  │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  消費層    │ Tableau, Power BI, Looker                 │
│  ──────────┼─────────────────────────────────────────  │
│  処理層    │ Spark, dbt, Airflow                       │
│  ──────────┼─────────────────────────────────────────  │
│  保管層    │ Snowflake, Databricks, BigQuery          │
│  ──────────┼─────────────────────────────────────────  │
│  統合層    │ Fivetran, Airbyte, Kafka                  │
│  ──────────┼─────────────────────────────────────────  │
│  ガバナンス│ Collibra, Alation, dbt docs              │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## ツール・テクノロジー

### データモデリングツール

| ツール | 特徴 |
|--------|------|
| **ERwin** | エンタープライズ向け |
| **PowerDesigner** | SAP連携 |
| **ER/Studio** | コラボレーション |
| **SqlDBM** | クラウドベース |
| **dbdiagram.io** | 軽量、無料 |

### アーキテクチャドキュメントツール

| ツール | 用途 |
|--------|------|
| **Lucidchart** | 図表作成 |
| **draw.io** | 無料、汎用 |
| **Miro** | コラボレーション |
| **Confluence** | ドキュメント管理 |
